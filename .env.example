# ============================================
# DATABASE (optional - metrics storage)
# ============================================
# If not set, DB storage is skipped (alerting works fine without it)
# DATABASE_URL=postgresql://user:password@localhost:5432/metrics_store

# ============================================
# API (automatic - REST endpoints)
# ============================================
# API is enabled when DATABASE_URL is set
# 100 API keys are auto-generated in the api_keys table on first run
# Retrieve keys via: GET /api/keys (requires any valid key to access)

# ============================================
# NOTIFICATION CHANNELS
# ============================================

# Pushover (mobile push notifications)
PUSHOVER_ENABLED=true
PUSHOVER_USER_KEY=your_user_key_here
PUSHOVER_API_TOKEN=your_api_token_here

# Slack
SLACK_ENABLED=false
SLACK_BOT_TOKEN=xoxb-your-bot-token-here
SLACK_CHANNELS=#canton-alerts,#trading-desk
SLACK_USERS=U01ABC123,U04XYZ789

# ============================================
# ALERT SCHEDULES
# ============================================

# Alert 1: Threshold alerts (when Est.Traffic > Gross)
ALERT1_ENABLED=true
ALERT1_INTERVAL_MINUTES=15

# Alert 2: Status reports (all current values)
ALERT2_ENABLED=true
ALERT2_INTERVAL_MINUTES=60

# ============================================
# EXCLUSIONS (per-alert filtering)
# ============================================
# Targets in these lists will NOT receive that alert type
# Everyone else gets everything by default

# Alert 1 exclusions (threshold alerts)
ALERT1_EXCLUDE_PUSHOVER=false
ALERT1_EXCLUDE_CHANNELS=
ALERT1_EXCLUDE_USERS=

# Alert 2 exclusions (status reports)
ALERT2_EXCLUDE_PUSHOVER=false
ALERT2_EXCLUDE_CHANNELS=
ALERT2_EXCLUDE_USERS=

# ============================================
# CHANGE ALERTS (Alerts 3, 4, 5)
# ============================================
# These alerts detect percentage changes vs 1hr or 24hr averages
# COMPARISON_PERIOD options: 1hr, 24hr, both (or all)

# Shared interval for all change alerts
CHANGE_ALERTS_INTERVAL_MINUTES=15

# Alert 3: Est.Traffic spike/drop
ALERT3_ENABLED=true
ALERT3_THRESHOLD_PERCENT=30
ALERT3_COMPARISON_PERIOD=1hr

# Alert 3 exclusions
ALERT3_EXCLUDE_PUSHOVER=false
ALERT3_EXCLUDE_CHANNELS=
ALERT3_EXCLUDE_USERS=

# Alert 4: Gross spike/drop
ALERT4_ENABLED=true
ALERT4_THRESHOLD_PERCENT=30
ALERT4_COMPARISON_PERIOD=1hr

# Alert 4 exclusions
ALERT4_EXCLUDE_PUSHOVER=false
ALERT4_EXCLUDE_CHANNELS=
ALERT4_EXCLUDE_USERS=

# Alert 5: Diff (Gross - Est.Traffic) change
ALERT5_ENABLED=true
ALERT5_THRESHOLD_PERCENT=30
ALERT5_COMPARISON_PERIOD=1hr

# Alert 5 exclusions
ALERT5_EXCLUDE_PUSHOVER=false
ALERT5_EXCLUDE_CHANNELS=
ALERT5_EXCLUDE_USERS=
